(function(n){n.fn.slides=function(t){return t=n.extend({},n.fn.slides.option,t),this.each(function(){function g(){clearInterval(i.data("interval"))}function w(){t.pause?(clearTimeout(i.data("pause")),clearInterval(i.data("interval")),pauseTimeout=setTimeout(function(){clearTimeout(i.data("pause"));playInterval=setInterval(function(){h("next",c)},t.play);i.data("interval",playInterval)},t.pause),i.data("pause",pauseTimeout)):g()}function h(e,h,c){if(!l&&b){l=!0;switch(e){case"next":s=o;u=o+1;u=v===u?0:u;p=f*2;e=-f*2;o=u;break;case"prev":s=o;u=o-1;u=u===-1?v-1:u;p=0;e=0;o=u;break;case"pagination":u=parseInt(c,10);s=n("."+t.paginationClass+" li.current a",i).attr("href").match("[^#/]+$");u>s?(p=f*2,e=-f*2):(p=0,e=0);o=u}h==="fade"?(t.animationStart(),t.crossfade?r.children(":eq("+u+")",i).css({zIndex:10}).fadeIn(t.fadeSpeed,function(){r.children(":eq("+s+")",i).css({display:"none",zIndex:0});n(this).css({zIndex:0});t.animationComplete(u+1);l=!1}):(t.animationStart(),r.children(":eq("+s+")",i).fadeOut(t.fadeSpeed,function(){t.autoHeight?r.animate({height:r.children(":eq("+u+")",i).outerHeight()},t.autoHeightSpeed,function(){r.children(":eq("+u+")",i).fadeIn(t.fadeSpeed)}):r.children(":eq("+u+")",i).fadeIn(t.fadeSpeed,function(){n.browser.msie&&n(this).get(0).style.removeAttribute("filter")});t.animationComplete(u+1);l=!1}))):(r.children(":eq("+u+")").css({left:p,display:"block"}),t.autoHeight?(t.animationStart(),r.animate({left:e,height:r.children(":eq("+u+")").outerHeight()},t.slideSpeed,function(){r.css({left:-f});r.children(":eq("+u+")").css({left:f,zIndex:5});r.children(":eq("+s+")").css({left:f,display:"none",zIndex:0});t.animationComplete(u+1);l=!1})):(t.animationStart(),r.animate({left:e},t.slideSpeed,function(){r.css({left:-f});r.children(":eq("+u+")").css({left:f,zIndex:5});r.children(":eq("+s+")").css({left:f,display:"none",zIndex:0});t.animationComplete(u+1);l=!1})));t.pagination&&(n("."+t.paginationClass+" li.current",i).removeClass("current"),n("."+t.paginationClass+" li:eq("+u+")",i).addClass("current"))}}var d;n("."+t.container,n(this)).children().wrapAll('<div class="slides_control"/>');var i=n(this),r=n(".slides_control",i),v=r.children().size(),f=r.children().outerWidth(),nt=r.children().outerHeight(),e=t.start-1,c=t.effect.indexOf(",")<0?t.effect:t.effect.replace(" ","").split(",")[0],k=t.effect.indexOf(",")<0?c:t.effect.replace(" ","").split(",")[1],u=0,s=0,y=0,o=0,b,l,a,p;v<2||(e<0&&(e=0),e>v&&(e=v-1),t.start&&(o=e),t.randomize&&r.randomize(),n("."+t.container,i).css({overflow:"hidden",position:"relative"}),r.css({position:"relative",width:f*3,height:nt,left:-f}),r.children().css({position:"absolute",top:0,left:f,zIndex:0,display:"none"}),t.autoHeight&&r.animate({height:r.children(":eq("+e+")").outerHeight()},t.autoHeightSpeed),t.preload&&r.children()[0].tagName=="IMG"?(i.css({background:"url("+t.preloadImage+") no-repeat 50% 50%"}),d=n("img:eq("+e+")",i).attr("src")+"?"+(new Date).getTime(),n("img:eq("+e+")",i).attr("src",d).load(function(){n(this).fadeIn(t.fadeSpeed,function(){n(this).css({zIndex:5});i.css({background:""});b=!0})})):r.children(":eq("+e+")").fadeIn(t.fadeSpeed,function(){b=!0}),t.bigTarget&&(r.children().css({cursor:"pointer"}),r.children().click(function(){return h("next",c),!1})),t.hoverPause&&t.play&&(r.children().bind("mouseover",function(){g()}),r.children().bind("mouseleave",function(){w()})),t.generateNextPrev&&(n("."+t.container,i).after('<a href="#" class="'+t.prev+'">Prev<\/a>'),n("."+t.prev,i).after('<a href="#" class="'+t.next+'">Next<\/a>')),n("."+t.next,i).click(function(n){n.preventDefault();t.play&&w();h("next",c)}),n("."+t.prev,i).click(function(n){n.preventDefault();t.play&&w();h("prev",c)}),t.generatePagination?(i.append("<ul class="+t.paginationClass+"><\/ul>"),r.children().each(function(){n("."+t.paginationClass,i).append('<li><a href="#'+y+'">'+(y+1)+"<\/a><\/li>");y++})):n("."+t.paginationClass+" li a",i).each(function(){n(this).attr("href","#"+y);y++}),n("."+t.paginationClass+" li:eq("+e+")",i).addClass("current"),n("."+t.paginationClass+" li a",i).click(function(){return t.play&&w(),a=n(this).attr("href").match("[^#/]+$"),o!=a&&h("pagination",k,a),!1}),n("a.link",i).click(function(){return t.play&&w(),a=n(this).attr("href").match("[^#/]+$")-1,o!=a&&h("pagination",k,a),!1}),t.play&&(playInterval=setInterval(function(){h("next",c)},t.play),i.data("interval",playInterval)))})};n.fn.slides.option={preload:!1,preloadImage:"/img/loading.gif",container:"slides_container",generateNextPrev:!1,next:"next",prev:"prev",pagination:!0,generatePagination:!0,paginationClass:"pagination",fadeSpeed:350,slideSpeed:350,start:1,effect:"slide",crossfade:!1,randomize:!1,play:0,pause:0,hoverPause:!1,autoHeight:!1,autoHeightSpeed:350,bigTarget:!1,animationStart:function(){},animationComplete:function(){}};n.fn.randomize=function(t){function r(){return Math.round(Math.random())-.5}return n(this).each(function(){var e=n(this),f=e.children(),o=f.length,u;if(o>1){for(f.hide(),u=[],i=0;i<o;i++)u[u.length]=i;u=u.sort(r);n.each(u,function(n,i){var r=f.eq(i),u=r.clone(!0);u.show().appendTo(e);t!==undefined&&t(r,u);r.remove()})}})}})(jQuery);