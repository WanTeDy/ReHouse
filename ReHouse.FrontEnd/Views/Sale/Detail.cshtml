@using ReHouse.Utils.Helpers
@using System.Globalization;
@model ReHouse.FrontEnd.Models.LoadAdvertModel

@section scripts {
    @Scripts.Render("~/bundles/slides");
    <script>
        $(function () {
            $('#products').slides({
                preload: true,
                preloadImage: '',
                effect: 'slide, fade',
                crossfade: true,
                slideSpeed: 200,
                fadeSpeed: 500,
                generateNextPrev: true,
                generatePagination: false
            });
        });
    </script>
    <!--  FancyBox -->
    @Scripts.Render("~/bundles/fancybox");
    <script>
        $(document).ready(function () {
            $("a.plan").fancybox();
            // $("a.plan").fancybox({"frameWidth":1560,"frameHeight":1340});
        });
    </script>
}

<div class="navigation_string">
    <div class="way">
        @Html.ActionLink("Главная", "Index", "Home")
        <pre> </pre>
        <p>/</p>
        <pre> </pre>

        @{ string action = "", desc = "", pricePerSquere = ""; }
        @if (Model.Square > 0)
        {
            pricePerSquere = Model.Advert.Price / Model.Square + " $ за м²";
        }
        @switch (Model.Advert.Category.ParentId)
        {
            case (int)ParrentCategories.Flat:
                desc = "Купить квартиру";
                action = "flat";
                break;
            case (int)ParrentCategories.House:
                desc = "Купить дом";
                action = "house";
                break;
            case (int)ParrentCategories.Homestead:
                desc = "Купить участок";
                action = "homestead";
                break;
            case (int)ParrentCategories.Commerce:
                desc = "Купить коммерцию";
                action = "commerce";
                break;
        }

        @Html.ActionLink(desc, action, "sale")
        <pre> </pre>
        <p>/</p>
        <pre> </pre>
        <a href="~/sale/@action/@Model.Advert.Category.Id">@Model.Advert.Category.RussianName</a>
    </div>
</div>

<div class="h2novostroy">
    <h2>Продам @Model.Advert.Title.RussianName, @Model.Advert.Street</h2>
    <div class="favorite">
        <a onclick="addtocart(@Model.Advert.Id, '@Model.Advert.Type', true, this);" id="favorite">Добавить в избранное</a>
    </div>
    <div class="favorite1">
        <a href="~/email/index" id="favorite">Подать заявку</a>
    </div>
</div>
<div class="share_icons">
    <div class="share_fb">
        <a onclick="Share.facebook('http://rehouse-realty.com.ua/sale/detail/@(Model.Advert.Id)', 'Продам @Model.Advert.Title.RussianName, @Model.Advert.Street', 'http://rehouse-realty.com.ua@(Url.Content("~/Content/images/news1.jpg"))', '@Model.Advert.Description')"></a>
    </div>
    <div class="share_vk">
        <a onclick="Share.vkontakte('http://rehouse-realty.com.ua/sale/detail/@(Model.Advert.Id)', 'Продам @Model.Advert.Title.RussianName, @Model.Advert.Street', 'http://rehouse-realty.com.ua@(Url.Content("~/Content/images/news1.jpg"))', '@Model.Advert.Description')"></a>
    </div>
    <div class="share_tw">
        <a onclick="Share.twitter('http://rehouse-realty.com.ua/sale/detail/@(Model.Advert.Id)', 'Продам @Model.Advert.Title.RussianName, @Model.Advert.Street')"></a>
    </div>
</div>

@if (Model.Advert.Images != null && Model.Advert.Images.Count > 0)
{
    int i = 0;
    int j = 0;

    <div id="products_example">
        <div id="products">
            <div class="slides_container">
                @foreach (var item in Model.Advert.Images)
                {
                    if (i > 2)
                    {
                        break;
                    }
                    i++;
                    <a><img src="@Url.Content(item.Url + item.FileName)" width="767" height="600" alt=""></a>
                }

            </div>
            <ul class="pagination">

                @foreach (var item in Model.Advert.Images)
                {
                    if (j > 2)
                    {
                        break;
                    }
                    j++;
                    <li><a href="#"><img src="@Url.Content(item.Url + item.FileName)" alt=""></a></li>
                }

            </ul>
        </div>
    </div>
}
<div class="seotext3">
    <div class="h2sale"><h2>Описание</h2></div>

    <div class="h3cost">
        @if (ViewBag.UAH != 0)
        {
            <p class="grn">@ViewBag.UAH грн</p>
            <pre></pre>
            <p class="dot">·</p>
            <pre> </pre>
        }
        <p class="DolUSA">@Model.Advert.Price $</p>
        <pre></pre>
        @if (ViewBag.EUR != 0)
        {
            <p class="dot">·</p>
            <pre> </pre>
            <p class="grn">@ViewBag.EUR €</p>
            <pre></pre>
        }
    </div>

    <p>@Model.Advert.Description</p>
</div>
<div class="table_of_prodapart">
    <table>
        <tr>
            <td>Тип рынка: </td>
            <td>@Model.Advert.MarketType.RussianName</td>
        </tr>
        @if (Model.Advert.Category.ParentId != (int)ParrentCategories.Homestead)
        {
            <tr>
                <td>Состояние: </td>
                <td>@Model.Advert.TrimCondition.RussianName</td>
            </tr>
        }
        <tr>
            <td>Адрес: </td>
            <td>@Model.Advert.Street</td>
        </tr>
        @foreach (var prop in Model.Properties)
        {
            <tr>
                <td>@prop.Key.RussianName: </td>
                <td>@prop.Value.PropertiesValue</td>
            </tr>
        }

    </table>
</div>

@if (Model.Advert.PlanImages != null && Model.Advert.PlanImages.Count > 0)
{
    <div class="planirovka">
        @foreach (var item in Model.Advert.PlanImages)
        {
            <a class="plan" rel="group" title="Планировка" href="@Url.Content(item.Url + item.FileName)"><img src="@Url.Content(item.Url + item.FileName)" border="0" /></a>
        }
    </div>
}
@if (!String.IsNullOrEmpty(Model.Advert.YouTubeUrl))
{
    <div class="video-youtube">
        <iframe width="711" height="533" src="https://www.youtube.com/embed/@Model.Advert.YouTubeUrl" frameborder="0" allowfullscreen></iframe>
    </div>
}
<div class="map_managercard">
    <div id="mapapart_prod">

        <iframe src="https://maps.google.com/maps?q=@Model.Advert.Latitude.ToString(CultureInfo.InvariantCulture),@Model.Advert.Longitude.ToString(CultureInfo.InvariantCulture)&hl=es;z=14&amp;output=embed" width="614px" height="428px" frameborder="0" style="border:0" allowfullscreen></iframe>
    </div>

    <div class="manager">
        <div class="photo">
            @if (Model.Advert.User.Avatar != null)
            {
                <img src="@Url.Content(Model.Advert.User.Avatar.Url + Model.Advert.User.Avatar.FileName)" width="90p" height="90">
            }
            else
            {
                <img src="~/Content/images/manager.png" width="90p" height="90">
            }
        </div>
        <div class="manager_info">
            <div class="imgtel">
                <img src="~/Content/images/minphone.png">
            </div>
            <div class="number">
                @if (Model.Advert.User.Phones != null && Model.Advert.User.Phones.Count > 0)
                {
                    foreach (var phone in Model.Advert.User.Phones)
                    {
                        <p>@phone.TelePhone</p>
                    }
                }
                <p>@Model.Advert.User.Email</p>
                <p class="name">@Model.Advert.User.FirstName</p>
            </div>
        </div>
    </div>
</div>




<div class="h2prodsale"><h2>Новинки продаж</h2></div>

<div class="othernovostroy">
    <ul class="prods" id="data-container">
        @if (Model.OtherAdverts.Count > 0)
        {
            foreach (var item in Model.OtherAdverts)
            {
                <div class="data-item">
                    <li>
                        @if (item.IsExclusive)
                        {
                            <div class="redimg"><img src="~/Content/images/eksklusiv.png"></div>
                        }
                        else if (item.IsHot)
                        {
                            <div class="redimg"><img src="~/Content/images/redcorner.png"></div>
                        }
                        else
                        {
                            <div class="redimg"><img src="~/Content/images/newred.png"></div>
                        }
                        @if (item.Images != null && item.Images.Count > 0)
                        {
                            <a class="fix" href="~/sale/detail/@item.Id"><img src="@Url.Content(item.Images[0].Url + item.Images[0].FileName)" width="250" height="212" alt="" /></a>
                        }
                        else
                        {
                            <a href="~/sale/detail/@item.Id" class="fix"><img src="~/Content/images/news1.jpg" width="250" height="212" alt="" /></a>
                        }
                        <div class="min-content">
                            <div class="like" onclick="addtocart(@item.Id, '@item.Type', true, this);"></div>
                            <h3>Продам @item.Title.RussianName.ToLower()</h3>
                            <h4>@item.Description</h4>
                            <p class="cost">@item.Price $</p>
                            <a href="~/sale/detail/@item.Id" id="follow">❯</a>
                        </div>
                    </li>
                </div>
            }
        }
    </ul>
</div>
